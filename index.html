<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>呉市 高等学校・高等専門学校ダッシュボード</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>呉市 高等学校・高等専門学校データダッシュボード</h1>
            <p style="color: #666; margin-top: 10px; font-size: 0.95rem;">
                呉市内における高等学校・高等専門学校の男女別生徒数、教員数、学校数を可視化します
            </p>
        </header>

        <!-- JSONアップロードセクション -->
        <div class="upload-section">
            <label for="jsonFile" class="upload-label">
                <span>JSONファイルを選択</span>
                <input type="file" id="jsonFile" accept=".json" />
            </label>
            <div id="uploadStatus"></div>
        </div>

        <!-- フィルターセクション -->
        <div id="filterSection" class="filter-section hidden">
            <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                <div>
                    <label for="yearFilter" style="display: block; margin-bottom: 5px; font-weight: 600;">年度:</label>
                    <select id="yearFilter">
                        <option value="">すべて</option>
                    </select>
                </div>
                <div>
                    <label for="typeFilter" style="display: block; margin-bottom: 5px; font-weight: 600;">設置種別:</label>
                    <select id="typeFilter">
                        <option value="">すべて</option>
                        <option value="国立">国立</option>
                        <option value="県立">県立</option>
                        <option value="市立">市立</option>
                        <option value="私立">私立</option>
                    </select>
                </div>
                <div>
                    <label for="categoryFilter" style="display: block; margin-bottom: 5px; font-weight: 600;">学校種別:</label>
                    <select id="categoryFilter">
                        <option value="">すべて</option>
                        <option value="高等学校">高等学校</option>
                        <option value="工業高等専門学校">工業高等専門学校</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- サマリーカード -->
        <div id="summarySection" class="summary-section hidden">
            <div class="card">
                <h3>学校数</h3>
                <p class="card-value" id="schoolCount">-</p>
            </div>
            <div class="card">
                <h3>教員数</h3>
                <p class="card-value" id="teacherCount">-</p>
            </div>
            <div class="card">
                <h3>生徒数（計）</h3>
                <p class="card-value" id="totalStudent">-</p>
            </div>
            <div class="card">
                <h3>男女比</h3>
                <p class="card-value" id="genderRatio">-</p>
            </div>
        </div>

        <!-- チャートセクション -->
        <div id="chartsSection" class="charts-section hidden">
            <!-- 性別生徒数比較 -->
            <div class="chart-container">
                <h2>性別生徒数</h2>
                <canvas id="genderChart"></canvas>
            </div>

            <!-- 学校種別別の生徒数 -->
            <div class="chart-container">
                <h2>学校種別別生徒数</h2>
                <canvas id="categoryChart"></canvas>
            </div>

            <!-- 設置種別別の生徒数 -->
            <div class="chart-container">
                <h2>設置種別別生徒数</h2>
                <canvas id="typeChart"></canvas>
            </div>

            <!-- 年度別推移 -->
            <div class="chart-container">
                <h2>年度別生徒数推移</h2>
                <p style="font-size: 0.85rem; color: #666; margin-bottom: 10px;">※ グレー網掛け区間（2007-2009年度）はデータ欠損</p>
                <canvas id="yearTrendChart"></canvas>
            </div>
        </div>

        <!-- 年次変化率分析 (全幅) -->
        <div id="changeRateSection" class="distribution-section hidden">
            <div class="chart-container-full">
                <h2>年次間の生徒数変化率 (%)</h2>
                <canvas id="changeRateChart"></canvas>
            </div>
        </div>

        <!-- 教員数分析 (全幅) -->
        <div id="teacherSection" class="distribution-section hidden">
            <div class="chart-container-full">
                <h2>設置種別・学校種別別 教員数</h2>
                <canvas id="teacherChart"></canvas>
            </div>
        </div>

        <!-- 詳細テーブル -->
        <div id="tableSection" class="table-section hidden">
            <h2>詳細データテーブル</h2>
            <div class="table-controls">
                <input type="text" id="searchInput" placeholder="検索...">
                <select id="itemsPerPage">
                    <option value="10">10件</option>
                    <option value="25" selected>25件</option>
                    <option value="50">50件</option>
                </select>
            </div>
            <div class="table-wrapper">
                <table id="dataTable">
                    <thead>
                        <tr>
                            <th>年度</th>
                            <th>設置種別</th>
                            <th>学校種別</th>
                            <th>学校数</th>
                            <th>教員数</th>
                            <th>男生徒数</th>
                            <th>女生徒数</th>
                            <th>計</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                    </tbody>
                </table>
            </div>
            <div class="pagination">
                <button id="prevPage">前へ</button>
                <span id="pageInfo"></span>
                <button id="nextPage">次へ</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
